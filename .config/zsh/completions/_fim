#compdef fim

_fim_functions() {
    zmodload -Fa zsh/parameter p:functions
    typeset -a fim_funcs; fim_funcs=(
        ${(@f)"$(print -rl -- ${(k)functions})"}
    )
    _describe -t fim_funcs "functions" fim_funcs
}

_fim() {
    local ret=1
    _arguments_options=(-s -S -C)

    _arguments "${_arguments_options[@]}" \
    "*:: :_fim_functions" \
    && ret=0
}

_fim "$@"
